{% extends "base.html" %}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/account.css'%}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
{% endblock %}

{% block content %}
    {% include "header.html" %}
        <div class="account" style="display: flex; flex-direction:column; margin-top: 64px; padding: 40px;">
            <div style="display: flex; flex-direction: row; justify-content:space-between; align-items: center;">
                <p style="font-size: 24px;">
                    Здравствуйте, <b style="color: #EEAD77;">{{ name }}</b>
                </p>
                <a href="{% url 'usersettings' %}" >
                    <img style="margin-bottom: 8px;" src="{% static 'img/settings.svg' %}" />
                </a>
            </div>
            {% include "booking.html" %}
            <div style="display: flex; flex-direction: row; justify-content:space-between;">
                <div style="display: flex; flex-direction: column;">
                    <h2>Текущее бронирование</h2>
                    {% if current_bookings %}
                        {% for b in current_bookings %}
                        <div style="display:flex; gap:16px; margin-left:32px; margin-bottom:32px;">
                            <img src="{{ b.room.image_url }}"
                                style="width:200px; height:140px; border:#EEAD77 2px solid; border-radius:10px; margin-top:8px;"/>
                            <div class="cur-room-description">
                            <p><b>Номер</b> {{ b.room.room_type }}</p>
                            <p><b>Даты</b> {{ b.check_in }} – {{ b.check_out }}</p>
                            <p><b>Гости</b> {{ b.guests }}, дети {{ b.children }}</p>
                            <form method="post" action="{% url 'cancel_booking' b.pk %}">
                                {% csrf_token %}
                                <button type="submit">Отменить бронирование</button>
                            </form>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p>У вас нет активных броней.</p>
                    {% endif %}
                        <h2>
                            История бронирования
                        </h2>
                        {% if past_bookings %}
                            {% for b in past_bookings %}
                            <div style="display:flex; gap:16px; margin-left:32px; margin-bottom:32px;">
                                <img src="{{ b.room.image_url }}"
                                    style="width:200px; height:140px; border:#EEAD77 2px solid; border-radius:10px; margin-top:8px;"/>
                                <div class="cur-room-description">
                                <p><b>Номер</b> {{ b.room.room_type }}</p>
                                <p><b>Даты</b> {{ b.check_in }} – {{ b.check_out }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <p>У вас пока нет завершённых броней.</p>
                        {% endif %}
                </div>
                <div class="services">
                    <p>
                        Услуги
                    </p>
                    <p>
                        Заказать услуг
                    </p>
                    <nav>
                        <ul>
                        <li><a href="{% url 'rooms' %}">Клининг номера</a></li>
                        <li><a href="{% url 'restaurants' %}">Еда и напитки в номер</a></li>
                        </ul>
                    </nav>
                    <div>
                        <p>
                            Ваши услуги
                        </p>
                        <h2>Корзина</h2>
                        <p><a href="{% url 'cart_detail' %}">Перейти в корзину</a></p>

                    </div>
                </div>
            </div>
        </div>
{% endblock %}